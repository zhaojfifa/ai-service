<!DOCTYPE html>
<html lang="zh-CN">
  <head>    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>鐜妭 1 路 绱犳潗杈撳叆涓庣増寮忛瑙?/title>
    <link rel="stylesheet" href="/ai-service/styles.css?v=4" />
  </head>
  <body data-stage="stage1">
    <header>
      <div class="header-content">
        <div>
          <h1>钀ラ攢娴锋姤鐢熸垚宸ヤ綔娴?/h1>
          <p>鎸夌収涓変釜鐜妭瀹屾垚绱犳潗鍑嗗銆丄I 鐢熸垚涓庨偖浠跺垎鍙戙€?/p>
        </div>
        <label class="api-config">
          <span>鍚庣 API 鍦板潃</span>
          <input
            type="url"
            id="api-base"
            placeholder="https://ai-service-x758.onrender.com"
          />
        </label>
      </div>
      <nav class="stage-nav" aria-label="娴佺▼瀵艰埅">
        <span class="active">鐜妭 1 路 绱犳潗杈撳叆涓庣増寮忛瑙?/span>
        <span class="nav-arrow" aria-hidden="true">鈫?/span>
        <a href="stage2.html">鐜妭 2 路 AI 娴锋姤鐢熸垚</a>
        <span class="nav-arrow" aria-hidden="true">鈫?/span>
        <a href="stage3.html">鐜妭 3 路 閭欢鍙戦€?/a>
      </nav>
    </header>

    <main>
      <section class="card stage-card">
        <h2>鐜妭 1 路 绱犳潗杈撳叆涓庣増寮忛瑙?/h2>
        <p class="hint">
          鎸夌収缁欏畾鐗堝紡涓婁紶鍥惧儚绱犳潗锛屽～鍐欐枃瀛楄鏄庯紝骞跺疄鏃舵煡鐪嬪垎鍖洪瑙堛€傚畬鎴愬悗
          鐐瑰嚮鈥滀繚瀛樺苟鍓嶅線鐜妭 2鈥濈户缁祦绋嬨€?
        </p>
        <form id="poster-form" novalidate>
          <fieldset class="fieldset">
            <legend>妯℃澘閫夋嫨</legend>
            <div class="template-select-grid">
              <label class="field">
                <span>閫夋嫨閿佺増妯℃澘</span>
                <select id="template-select" name="template_id" required></select>
              </label>
              <div class="template-meta">
                <p id="template-description" class="template-description"></p>
                <canvas
                  id="template-preview"
                  width="360"
                  height="360"
                  aria-label="妯℃澘棰勮"
                ></canvas>
              </div>
            </div>
          </fieldset>

          <fieldset class="fieldset">
            <legend>椤堕儴妯潯</legend>
            <div class="grid top-banner-grid">
              <label class="field file-field" data-material-field="brand_logo">
                <span data-material-label="brand_logo">鍝佺墝 Logo 涓婁紶</span>
                <input type="file" name="brand_logo" accept="image/*" />
                <div class="inline-preview" role="presentation">
                  <img data-inline-preview="brand_logo" alt="鍝佺墝 Logo 棰勮" />
                </div>
                <div
                  class="asset-url"
                  data-material-url="brand_logo"
                  data-label="鍝佺墝 Logo URL锛?
                  aria-live="polite"
                >
                  鍝佺墝 Logo URL锛氬皻鏈笂浼?
                </div>
              </label>
              <label class="field">
                <span>鍝佺墝鍚嶇О</span>
                <input type="text" name="brand_name" />
              </label>
              <label class="field">
                <span>鍝佺墝浠ｇ悊鍚?/ 鍒嗛攢鍚?/span>
                <input type="text" name="agent_name" />
              </label>
            </div>
          </fieldset>

          <fieldset class="fieldset">
            <legend>鍥惧儚绱犳潗鍖?/legend>
            <div class="image-zones">
              <div class="image-stack">
                <div class="mode-toggle" data-mode-target="scenario">
                  <span data-material-toggle-label="scenario">鍦烘櫙绱犳潗鏉ユ簮</span>
                  <label data-mode-option="scenario-upload">
                    <input type="radio" name="scenario_mode" value="upload" checked /> 涓婁紶鍥惧儚
                  </label>
                  <label data-mode-option="scenario-prompt">
                    <input type="radio" name="scenario_mode" value="prompt" /> 鏂囧瓧鐢熸垚
                  </label>
                </div>
                <label class="field file-field" data-material-field="scenario">
                  <span data-material-label="scenario">搴旂敤鍦烘櫙鍥句笂浼?/span>
                  <input type="file" name="scenario_asset" accept="image/*" />
                  <div class="inline-preview">
                    <img data-inline-preview="scenario_asset" alt="搴旂敤鍦烘櫙棰勮" />
                  </div>
                </label>
                <label class="field" data-material-description-container="scenario">
                  <span data-material-description="scenario">搴旂敤鍦烘櫙鎻忚堪锛堜笂浼犳垨 AI 鐢熸垚鏃堕兘浼氱敤鍒帮級</span>
                  <textarea
                    id="scenario_prompt"
                    name="scenario_image"
                    rows="3"
                    data-material-input="scenario"
                    data-role="scenario-positive-prompt"
                  ></textarea>
                  <div class="slot-actions">
                    <button type="button" id="btn-generate-scenario" class="secondary">
                      AI 鐢熸垚鍦烘櫙鍥?
                    </button>
                    <img id="scenario_preview" class="slot-preview" alt="鍦烘櫙鍥鹃瑙? />
                  </div>
                </label>
              </div>
              <div class="image-stack">
                <div class="mode-toggle" data-mode-target="product">
                  <span data-material-toggle-label="product">涓讳骇鍝佺礌鏉愭潵婧?/span>
                  <label data-mode-option="product-upload">
                    <input type="radio" name="product_mode" value="upload" checked /> 涓婁紶鍥惧儚
                  </label>
                  <label data-mode-option="product-prompt">
                    <input type="radio" name="product_mode" value="prompt" /> 鏂囧瓧鐢熸垚
                  </label>
                </div>
                <label class="field file-field" data-material-field="product">
                  <span data-material-label="product">浜у搧 45掳 娓叉煋鍥句笂浼?/span>
                  <input type="file" name="product_asset" accept="image/*" />
                  <div class="inline-preview">
                    <img data-inline-preview="product_asset" alt="浜у搧娓叉煋鍥鹃瑙? />
                  </div>
                </label>
                <label class="field">
                  <span>涓讳骇鍝佸悕绉?/span>
                  <input type="text" name="product_name" />
                </label>
                <label class="field optional" data-mode-visible="product:prompt" data-material-prompt="product">
                  <span data-material-prompt-label="product">浜у搧鍥剧敓鎴愭弿杩帮紙鍙€夎ˉ鍏咃級</span>
                  <textarea
                    id="product_prompt"
                    name="product_prompt"
                    rows="3"
                    placeholder="琛ュ厖浜у搧鏉愯川銆佽搴︺€佷娇鐢ㄥ満鏅瓑淇℃伅"
                    data-material-input="product-prompt"
                    data-role="product-positive-prompt"
                  ></textarea>
                  <div class="slot-actions">
                    <button type="button" id="btn-generate-product" class="secondary">
                      AI 鐢熸垚涓讳骇鍝佸浘
                    </button>
                    <img id="product_preview" class="slot-preview" alt="涓讳骇鍝侀瑙? />
                  </div>
                </label>
                <div class="feature-fields">
                  <span class="feature-label">鍔熻兘鐐癸紙鎻忚堪浜у搧 45掳 娓叉煋鍥撅紝濉啓 3-4 鏉★級</span>
                  <div class="feature-grid">
                    <input type="text" name="features" />
                    <input type="text" name="features" />
                    <input type="text" name="features" />
                    <input type="text" name="features" placeholder="鍙€? />
                  </div>
                </div>
              </div>
            </div>
          </fieldset>

          <fieldset class="fieldset">
            <legend>鏂囧瓧瀛楁涓庡簳閮ㄤ骇鍝?/legend>
            <div class="grid text-grid">
              <label class="field">
                <span>鏍囬鏂囨锛堝ぇ鍙风矖浣撶孩瀛楋級</span>
                <input type="text" name="title" />
              </label>
              <label class="field">
                <span>鍓爣棰樻枃妗堬紙宸︿笅 / 鍙充笅瑙掞級</span>
                <input type="text" name="subtitle" />
              </label>
            </div>
            <div class="bottom-thumbnails">
              <div>
                <span class="field-label">底部产品小图（0–4 张，可选）</span>
                <p class="micro-copy">
                  默认不强制上传。可手动上传 0–4 张；如勾选自动补全，系统会在渲染时尽量复用已有素材自动填充空槽位。
                </p>
              </div>
              <label class="field inline optional">
                <input type="checkbox" name="allow_auto_fill" checked />
                <span>Allow auto-fill (Mode S asset utilization)</span>
              </label>
              <div id="bottom-thumbnails" class="thumbnail-grid" aria-live="polite">
                <div class="thumbnail-slot" data-slot-index="0">
                  <div class="thumbnail-preview">
                    <img data-bottom-preview="0" alt="底部小图 1 预览" />
                    <span class="slot-placeholder">Empty</span>
                  </div>
                  <div class="thumbnail-actions">
                    <label class="button-like">
                      上传 / 替换
                      <input type="file" name="bottom_slot_1" accept="image/*" />
                    </label>
                    <button type="button" class="secondary" data-bottom-clear="0">??</button>
                  </div>
                </div>
                <div class="thumbnail-slot" data-slot-index="1">
                  <div class="thumbnail-preview">
                    <img data-bottom-preview="1" alt="底部小图 2 预览" />
                    <span class="slot-placeholder">Empty</span>
                  </div>
                  <div class="thumbnail-actions">
                    <label class="button-like">
                      上传 / 替换
                      <input type="file" name="bottom_slot_2" accept="image/*" />
                    </label>
                    <button type="button" class="secondary" data-bottom-clear="1">??</button>
                  </div>
                </div>
                <div class="thumbnail-slot" data-slot-index="2">
                  <div class="thumbnail-preview">
                    <img data-bottom-preview="2" alt="底部小图 3 预览" />
                    <span class="slot-placeholder">Empty</span>
                  </div>
                  <div class="thumbnail-actions">
                    <label class="button-like">
                      上传 / 替换
                      <input type="file" name="bottom_slot_3" accept="image/*" />
                    </label>
                    <button type="button" class="secondary" data-bottom-clear="2">??</button>
                  </div>
                </div>
                <div class="thumbnail-slot" data-slot-index="3">
                  <div class="thumbnail-preview">
                    <img data-bottom-preview="3" alt="底部小图 4 预览" />
                    <span class="slot-placeholder">Empty</span>
                  </div>
                  <div class="thumbnail-actions">
                    <label class="button-like">
                      上传 / 替换
                      <input type="file" name="bottom_slot_4" accept="image/*" />
                    </label>
                    <button type="button" class="secondary" data-bottom-clear="3">??</button>
                  </div>
                </div>
              </div>
            </div>
        </fieldset>
        </form>
        <p id="stage1-status" role="status" aria-live="polite"></p>

        <div class="preview" id="preview-container">
          <h3>鐗堝紡棰勮</h3>
          <div id="layout-preview" class="poster-preview">
            <div class="poster-header">
              <div class="poster-logo">
                <div class="poster-logo-image">
                  <img id="preview-brand-logo" alt="鍝佺墝 Logo 棰勮" />
                </div>
                <div class="poster-brand-name" id="preview-brand-name"></div>
              </div>
              <div class="poster-agent" id="preview-agent-name"></div>
            </div>
            <div class="poster-body">
              <div class="poster-left">
                <img id="preview-scenario-image" alt="搴旂敤鍦烘櫙棰勮" />
              </div>
              <div class="poster-right">
                <div class="poster-product-wrapper">
                  <img id="preview-product-image" alt="浜у搧娓叉煋鍥鹃瑙? />
                  <ul id="preview-feature-list" class="feature-tags">
                    <li class="feature-tag feature-tag--top" data-feature-index="0"><span></span></li>
                    <li class="feature-tag feature-tag--middle" data-feature-index="1"><span></span></li>
                    <li class="feature-tag feature-tag--bottom" data-feature-index="2"><span></span></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="poster-title" id="preview-title"></div>
            <div class="poster-gallery" id="preview-gallery"></div>
            <div class="poster-subtitle" id="preview-subtitle"></div>
          </div>
          <details class="layout-structure">
            <summary>鏌ョ湅鐗堝紡缁撴瀯璇存槑</summary>
            <pre id="layout-structure-text"></pre>
          </details>
        </div>
      </section>
    </main>

    <footer>
      <small>鍓嶇鎵樼浜?GitHub Pages锛屽悗绔敱 Render 鎻愪緵鏈嶅姟銆?/small>
    </footer>
    <!-- styles.css 涔嬪悗锛宎pp.js 涔嬪墠 -->
    <script defer src="/ai-service/placeholder.js?v=4"></script>
    <script defer src="/ai-service/app.js?v=4"></script>
  </body>
</html>
