<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>环节 2 · AI 生成与 A/B 预览</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body data-stage="stage2">
    <header class="page-header">
      <div>
        <h1>环节 2 · AI 生成与 A/B 预览</h1>
        <p>延续 Route A 槽位版式，调用后端生成图像与文案。</p>
      </div>
      <nav class="stage-nav">
        <a href="index.html">返回环节 1</a>
        <span class="nav-arrow">→</span>
        <span class="active">环节 2</span>
        <span class="nav-arrow">→</span>
        <a href="stage3.html" id="nav-stage3">环节 3</a>
      </nav>
    </header>

    <main class="stage-layout">
      <section class="card prompt-preview-card" id="prompt-preview-card">
        <h2>预览当前提示词</h2>
        <div class="prompt-preview">
          <h3>模板默认英文提示词</h3>
          <pre id="template-default-prompt" class="prompt-block"></pre>
          <h3>槽位提示词汇总</h3>
          <pre id="prompt-preview-text" class="prompt-block"></pre>
        </div>
      </section>

      <section class="card stage-card" id="ab-card">
        <h2>A/B 测试功能</h2>
        <div id="layout-picker-stage2" class="layout-picker"></div>
        <div class="actions">
          <button class="btn primary" id="generate-poster">生成海报与文案</button>
          <button class="btn" id="regenerate-poster">再次生成</button>
          <button class="btn" id="preview-prompts">预览提示词</button>
        </div>
        <div id="ab-preview" class="ab-preview">
          <div id="ab-preview-variant-a" class="poster-frame poster-preview--a"></div>
          <div id="ab-preview-variant-b" class="poster-frame poster-preview--b"></div>
        </div>
        <div class="ab-attachment-choice">
          <label>
            <input type="radio" name="posterAttachmentVariant" value="A" checked />
            使用 A 版海报作为邮件附件
          </label>
          <label>
            <input type="radio" name="posterAttachmentVariant" value="B" />
            使用 B 版海报作为邮件附件
          </label>
          <small id="variant-b-note" class="form-hint"></small>
        </div>
        <div class="actions">
          <button class="btn primary" id="go-to-stage3">保存并前往环节 3</button>
        </div>
      </section>

      <section class="card layout-debug-hidden" id="layout-preview-group">
        <h2>版式结构（调试用）</h2>
        <pre id="layout-structure-text"></pre>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
